#!/bin/sh

echo "# AUTOGENERATED BY CONFIGURE" > make.inc
cat version >> make.inc
rm make.deps 2>/dev/null

printf "done\nprocessing configuration...\n"

SYSNAME=""

if [ -e /proc/seaos ]; then
	SYSNAME="seaos"
else
	SYSNAME="linux"
fi

echo -ne "It would appear that you're running $SYSNAME, but let's make sure.\nWhat OS are you running (seaos/linux)? [$SYSNAME] "
read inp

if [ "$inp" != "" ]; then
	SYSNAME=$inp
fi

if [ "$SYSNAME" == "seaos" ]; then
	echo "SYSNAME=seaos" >> make.inc
	echo "CC=gcc" >> make.inc
	echo "LD=ld" >> make.inc
	echo "AR=ar" >> make.inc
else
	echo "SYSNAME=linux" >> make.inc
	echo "CC=\${ARCH_TC}-pc-seaos-gcc" >> make.inc
	echo "LD=\${ARCH_TC}-pc-seaos-ld" >> make.inc
	echo "AR=\${ARCH_TC}-pc-seaos-ar" >> make.inc
fi

echo "Allgood" > tools/confed

echo "okay! all done!"
